<Window x:Class="ArcRaidersOverlay.OverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ARC Raiders Overlay"
        AllowsTransparency="True"
        WindowStyle="None"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        Left="10" Top="10"
        Width="320" Height="500"
        ResizeMode="NoResize">

    <Grid Margin="5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Bar (Draggable Area) -->
        <Border Grid.Row="0" Background="#99000000" CornerRadius="5" Padding="8" Margin="0,0,0,5"
                MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="ARC Raiders Overlay"
                           Style="{StaticResource HeaderTextStyle}"
                           VerticalAlignment="Center"/>
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="LockButton" Content="Lock" Width="45" Height="22"
                            Click="LockButton_Click" Margin="0,0,5,0"
                            Background="#66444444" Foreground="White" BorderThickness="0"/>
                    <Button x:Name="MinimizeButton" Content="_" Width="22" Height="22"
                            Click="MinimizeButton_Click"
                            Background="#66444444" Foreground="White" BorderThickness="0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Events Panel -->
        <Border Grid.Row="1" x:Name="EventsBorder" Background="#99000000" CornerRadius="5" Padding="8" Margin="0,0,0,5">
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Events" Style="{StaticResource HeaderTextStyle}"/>
                    <TextBlock x:Name="EventsCompactSummary" Grid.Column="1"
                               Style="{StaticResource EventTextStyle}" Foreground="#AAAAAA"
                               Visibility="Collapsed" VerticalAlignment="Center"/>
                </Grid>
                <StackPanel x:Name="EventsPanel" Margin="0,5,0,0">
                    <TextBlock Text="Scanning for events..."
                               Style="{StaticResource EventTextStyle}"
                               Foreground="#AAAAAA" FontStyle="Italic"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Active Event Timer -->
        <Border Grid.Row="2" x:Name="ActiveEventBorder" Background="#99003300" CornerRadius="5"
                Padding="8" Margin="0,0,0,5" Visibility="Collapsed">
            <StackPanel>
                <TextBlock Text="Active Event" Style="{StaticResource HeaderTextStyle}"
                           Foreground="#00FF00" Margin="0,0,0,3"/>
                <TextBlock x:Name="ActiveEventText" Style="{StaticResource EventTextStyle}"
                           Foreground="#88FF88"/>
                <TextBlock x:Name="ActiveEventTimer" Style="{StaticResource HeaderTextStyle}"
                           Foreground="#00FF00" FontSize="18"/>
            </StackPanel>
        </Border>

        <!-- Minimap - Hidden until map images are added -->
        <Border Grid.Row="3" Background="#99000000" CornerRadius="5" Padding="8" Margin="0,0,0,5"
                Visibility="Collapsed">
            <StackPanel>
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Minimap" Style="{StaticResource HeaderTextStyle}"/>
                    <TextBlock x:Name="CurrentMapText" Grid.Column="1"
                               Style="{StaticResource OverlayTextStyle}"
                               Foreground="#AAAAAA" FontSize="10"/>
                </Grid>
                <Border Background="#66222222" CornerRadius="3" Padding="2">
                    <Image x:Name="MinimapImage" Width="280" Height="180"
                           Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality"/>
                </Border>
                <!-- POI Legend -->
                <StackPanel x:Name="POILegend" Orientation="Horizontal" Margin="0,5,0,0">
                    <Ellipse Width="8" Height="8" Fill="#FF4444" Margin="0,0,3,0"/>
                    <TextBlock Text="Extract" Foreground="#AAAAAA" FontSize="9" Margin="0,0,10,0"/>
                    <Ellipse Width="8" Height="8" Fill="#44FF44" Margin="0,0,3,0"/>
                    <TextBlock Text="Loot" Foreground="#AAAAAA" FontSize="9" Margin="0,0,10,0"/>
                    <Ellipse Width="8" Height="8" Fill="#4444FF" Margin="0,0,3,0"/>
                    <TextBlock Text="Event" Foreground="#AAAAAA" FontSize="9"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Scan Status -->
        <Border Grid.Row="4" Background="#99000000" CornerRadius="5" Padding="8" Margin="0,0,0,5">
            <StackPanel>
                <TextBlock Text="Item Scanner" Style="{StaticResource HeaderTextStyle}" Margin="0,0,0,3"/>
                <TextBlock x:Name="ScanStatusText" Style="{StaticResource EventTextStyle}"
                           Text="Press [Shift+S] to scan item" Foreground="#AAAAAA"/>
                <TextBlock x:Name="LastScannedItem" Style="{StaticResource EventTextStyle}"
                           Foreground="#FFCC00" Visibility="Collapsed"/>
            </StackPanel>
        </Border>

        <!-- Item Tooltip Panel -->
        <Border Grid.Row="5" x:Name="TooltipPanel" Background="#DD1a1a1a" CornerRadius="5"
                Padding="10" Visibility="Collapsed" BorderBrush="#555555" BorderThickness="1">
            <StackPanel>
                <!-- Recommendation Banner -->
                <Border x:Name="TooltipRecommendationBorder" CornerRadius="3" Padding="8,4"
                        Margin="0,0,0,8" Background="#2288FF88">
                    <TextBlock x:Name="TooltipRecommendation"
                               Style="{StaticResource TooltipTextStyle}"
                               FontWeight="Bold" FontSize="12" HorizontalAlignment="Center"/>
                </Border>

                <!-- Item Name -->
                <TextBlock x:Name="TooltipItemName" Style="{StaticResource HeaderTextStyle}"
                           FontSize="14" Foreground="#FFCC00" Margin="0,0,0,5"/>

                <!-- Item Category/Rarity -->
                <TextBlock x:Name="TooltipItemCategory" Style="{StaticResource TooltipTextStyle}"
                           Foreground="#AAAAAA" FontSize="10" Margin="0,0,0,8"/>

                <!-- Quest Item Warning -->
                <Border x:Name="TooltipQuestWarning" CornerRadius="3" Padding="5"
                        Margin="0,0,0,5" Background="#44FF8800" Visibility="Collapsed">
                    <TextBlock x:Name="TooltipQuestText" Style="{StaticResource TooltipTextStyle}"
                               Foreground="#FFAA00" FontWeight="SemiBold"/>
                </Border>

                <!-- Value and Recycle % Section -->
                <Border Background="#33444444" CornerRadius="3" Padding="5" Margin="0,0,0,5">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Sell Value:" Style="{StaticResource TooltipTextStyle}"/>
                            <TextBlock x:Name="TooltipValue" Grid.Column="1"
                                       Style="{StaticResource TooltipTextStyle}"
                                       Foreground="#88FF88" FontWeight="SemiBold"/>
                        </Grid>
                        <Grid x:Name="TooltipRecyclePercentRow" Margin="0,3,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Recycle Efficiency:" Style="{StaticResource TooltipTextStyle}"/>
                            <TextBlock x:Name="TooltipRecyclePercent" Grid.Column="1"
                                       Style="{StaticResource TooltipTextStyle}" FontWeight="SemiBold"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Workshop Uses -->
                <StackPanel x:Name="TooltipWorkshopSection" Margin="0,0,0,5">
                    <TextBlock Text="Workshop Uses:" Style="{StaticResource TooltipTextStyle}"
                               Foreground="#AAAAAA" Margin="0,0,0,3"/>
                    <Border Background="#33444444" CornerRadius="3" Padding="5">
                        <StackPanel x:Name="TooltipWorkshopUses">
                            <TextBlock Text="None" Style="{StaticResource TooltipTextStyle}"
                                       Foreground="#666666"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Recycle Outputs -->
                <StackPanel x:Name="TooltipRecycleSection" Margin="0,0,0,5">
                    <TextBlock Text="Recycle Outputs:" Style="{StaticResource TooltipTextStyle}"
                               Foreground="#AAAAAA" Margin="0,0,0,3"/>
                    <Border Background="#33444444" CornerRadius="3" Padding="5">
                        <StackPanel x:Name="TooltipRecycleOutputs">
                            <TextBlock Text="None" Style="{StaticResource TooltipTextStyle}"
                                       Foreground="#666666"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Project Uses -->
                <StackPanel x:Name="TooltipProjectSection">
                    <TextBlock Text="Used In Projects:" Style="{StaticResource TooltipTextStyle}"
                               Foreground="#AAAAAA" Margin="0,0,0,3"/>
                    <Border Background="#33444444" CornerRadius="3" Padding="5">
                        <StackPanel x:Name="TooltipProjectUses">
                            <TextBlock Text="None" Style="{StaticResource TooltipTextStyle}"
                                       Foreground="#666666"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>
